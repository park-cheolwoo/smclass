{% load static %}
<!DOCTYPE html>
<html>
<head>
{% csrf_token %}
<title>ANG-GGO</title>
<meta charset="UTF-8" />
<meta name="csrf-token" content="{{ csrf_token }}">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="description" content="ANGGGO" />
<meta name="keywords" content="ANGGGO" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scaleable=no" />
<link rel="icon" type="image/x-icon" href="{% static '/images/meow.ico'%}" />
<link rel="stylesheet" type="text/css" href="{% static '/css/reset.css' %}"/>
<link rel="stylesheet" type="text/css" href="{% static '/css/layout.css' %}"/>
<link rel="stylesheet" type="text/css" href="{% static '/css/content.css' %}"/>
<script type="text/javascript" src="{% static '/js/jquery.min.js' %}"></script>
<script type="text/javascript" src="{% static '/js/top_navi.js' %}"></script>
<script type="text/javascript" src="{% static '/js/left_navi.js' %}"></script>
<script type="text/javascript" src="{% static '/js/main.js' %}"></script>
<script type="text/javascript" src="{% static '/js/common.js' %}"></script>
<script type="text/javascript" src="{% static '/js/jquery.easing.1.3.js' %}"></script>
<script type="text/javascript" src="{% static '/js/idangerous.swiper-2.1.min.js' %}"></script>
<script type="text/javascript" src="{% static '/js/jquery.anchor.js' %}"></script>
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<script src="{% static '/js/signup.js' %}"></script>
<script type="text/javascript" src="{% static '/js/noLogin.js'%}"></script>


<script type="text/javascript">
	$(document).ready(function() {
		const csrfToken = $("meta[name='csrf-token']").attr("content");

		// 닉네임
		const nickname = $("#nickname")
		const expNicknameText = /^(?=.*[a-z0-9가-힣])[a-z0-9가-힣]{2,16}$/;
		
		// 주소
		let postcode = $("#sample6_postcode").val(); // 우편번호
		let address = $("#sample6_address").val();  // 주소
		let detailAddress = $("#sample6_detailAddress").val(); // 상세주소
		let extraAddress = $("#sample6_extraAddress").val(); // 참고항목
		let fullAddress = "";

		/* --------------------- nickname 유효성 검사 / 중복 확인 --------------------- */
		nickname.blur(function(){
			const userNickname = nickname.val();

			if(userNickname){
				$.ajax({
					headers : {"X-CSRFToken":csrfToken},
					url : "/member/nicknameDupChk/",
					type : "post",
					data : {"nickname":userNickname},

					success : function(response){
						// 유효성 검사
						if(!expNicknameText.test(userNickname)){
							$("#nicknameDupError").css("display", "none");
							$("#expNicknameError").css("display", "block");
							$("#expNicknameError").css("color", "red");
						} else if(response.result == "error"){
							$("#nicknameDupError").text(response.message).css(("display", "block"));
							$("#nicknameDupError").text(response.message).css(("color", "red"));
							$("#expNicknameError").css("display", "none");
						} else{
							$("#nicknameDupError").css("display", "none");
							$("#expNicknameError").css("display", "none");
							console.log("닉네임 : " + userNickname);
						}
					},
					error : function(){
						alert("서버 오류");
					}
				}); // ajax
			}
		}); // nickname

	
		/* --------------------- 주소 잘 들어왔는지 확인 --------------------- */
		$("#findAddr").change(function(){
			console.log("우편번호 : " + $("#sample6_postcode").val());
			console.log("주소지 : " + $("#sample6_address").val());
			console.log("상세주소 : " + $("#sample6_detailAddress").val());
			console.log("참고항목 : " + $("#sample6_extraAddress").val());
			console.log("주소 : " + $("#sample6_postcode").val() + " " + $("#sample6_address").val() + " " + ($("#sample6_detailAddress").val() + $("#sample6_extraAddress").val()).trim());
		});

		/* --------------------- 수정하기 버튼 --------------------- */
		$(".sbtnMini").click(function(){
			// alert("click");
			// 이메일 수신여부 확인(선택약관 동의) 
			if($("#receive_yes").prop("checked")){
				alert("필수동의");
				var agree2 = 1;
			} else if($("#receive_no").prop("checked")){
				var agree2 = 0;
			}
			
		});


	}); // jquery
</script>
</head>
<body>

<div id="allwrap">
<div id="wrap">

	<div id="header">
		
		<div id="snbBox">
			<a href="/"><h1 style="margin-left: -25px; font-size: 40px; font-weight: 800; color: #FF9E44">앙꼬</h1></a>
			{% comment %} <h1><img src="{% static '/images/txt/logo.gif' %}" alt="JARDIN SHOP" /></h1> {% endcomment %}
			<div id="quickmenu">
				<div id="mnaviOpen"><img src="{% static '/images/btn/btn_mnavi.gif' %}" width="33" height="31" alt="메뉴열기" /></div>
				<div id="mnaviClose"><img src="{% static '/images/btn/btn_mnavi_close.gif' %}" width="44" height="43" alt="메뉴닫기" /></div>
				<ul>
					<li><a href="#">EVENT</a></li>
					<li><a href="#">CUSTOMER</a></li>
					<li><a href="#">COMMUNITY</a></li>
				</ul>
			</div>
			<div id="snb">
				<ul>
					<li><a href="#">LOGIN</a></li>
					<li><a href="#">JOIN</a></li>
					<li><a href="#">MY PAGE</a></li>
					<li><a href="#">CART</a></li>
				</ul>

				<div id="search">
					<input type="text" class="searchType" />
					<input type="image" src="{% static '/images/btn/btn_main_search.gif' %}" width="23" height="20" alt="검색하기" />
				</div>
			</div>
		</div>
	</div>


	<!-- container -->
	<div id="container">

		<div id="location">
			<ol>
				<li><a href="#">HOME</a></li>
				<li><a href="#">MY PAGE</a></li>
				<li class="last">회원정보 수정</li>
			</ol>
		</div>
		
		<div id="outbox">		
			<div id="left">
				<div id="title">MY PAGE<span>마이페이지</span></div>
				<ul>	
					<li><a href="#" id="leftNavi1">주문/배송 조회</a></li>
					<li><a href="#" id="leftNavi2">반품/배송 현황</a></li>
					<li><a href="#" id="leftNavi3">장바구니</a></li>
					<li><a href="#" id="leftNavi4">위시리스트</a></li>
					<li><a href="#" id="leftNavi5">나의 쿠폰</a></li>
					<li><a href="#" id="leftNavi6">나의 포인트</a></li>
					<li><a href="#" id="leftNavi7">1:1문의</a></li>
					<li><a href="#" id="leftNavi8">회원정보 수정</a></li>
					<li class="last"><a href="/member/deleteAccount/" id="leftNavi9">회원 탈퇴</a></li>
				</ul>			
			</div><script type="text/javascript">initSubmenu(8,0);</script>

			<!-- contents -->
			<div id="contents">
				<div id="mypage">
					<h2><strong>회원정보 수정</strong><span>회원님의 개인 정보를 수정하실 수 있습니다.</span></h2>
					
					<div class="myInfo">
						<ul>
							<li class="info"><strong>{{ request.session.session_nickname }}</strong> 님의 정보를 한눈에 확인하세요.</li>
							<li>보유 쿠폰<br/><span class="num">199</span> <span class="unit">장</span></li>
							<li class="point">내 포인트<br/><span class="num">{{ member.point }}</span> <span class="unit">P</span></li>
							<li class="last">진행중인 주문<br/><span class="num">199</span> <span class="unit">건</span></li>
						</ul>
					</div>

					<div class="memberbd">
						<table summary="이름, 아이디, 비밀번호, 비밀번호 확인, 이메일, 이메일수신여부, 주소, 휴대폰, 유선전화, 생년월일 순으로 회원가입 정보를 수정할수 있습니다." class="memberWrite" border="1" cellspacing="0">
							<caption>회원가입 수정</caption>
							<colgroup>
							<col width="22%" class="tw30" />
							<col width="*" />
							</colgroup>
							<tbody>
								<tr>
									<th scope="row"><span>닉네임</span></th>
									<td>
										<ul class="pta">
											<div>
												<input type="text" placeholder="{{ request.session.session_nickname }}" class="input" id="nickname" name="nickname"/>
											</div>
											<div class="errorTexts" style="margin-top: 10px;">
												<div class="chk_no" id="expNicknameError" style="display: none;">2~16자의 영어 또는 숫자 또는 한글만 사용 가능합니다.</div>
												<div class="chk_no" id="nicknameDupError" style="display: none;"></div> <!-- 서버 측 에러 메시지 -->
											</div>
										</ul>
									</td>
								</tr>
								<tr>
									<th scope="row"><span>이름</span></th>
									<td>{{ member.name }}</td>
								</tr>
								<tr>
									<th scope="row"><span>아이디</span></th>
									<td>{{ member.id }}</td>
								</tr>
								<tr>
									<th scope="row"><span>비밀번호 변경</span></th>
									<td><a href="/member/passwordCheck/" class="nbtnMini iw86">비밀번호 확인</a></td>
								</tr>
								<tr>
									<th scope="row"><span>이메일</span></th>
									<td>
										<ul class="pta">
											<li>
												<span class="mvalign">{{ member.email }}</span>
											</li>
										</ul>
									</td>
								</tr>
								<tr>
									<th scope="row"><span>이메일 수신여부</span></th>
									<td>
										<p>앙꼬에서 진행되는 이벤트와 쇼핑에 대한 정보를 이메일로 받아보시겠습니까?</p>
										<ul class="question">
											<li>
												<input type="radio" name="receive" id="receive_yes" class="radio_t" {% if member.agree2 == 1 %}checked{% endif %} /><label for="receive_yes">예</label>
											</li>
											<li>
												<input type="radio" name="receive" id="receive_no" class="radio_t" {% if member.agree2 == 0 %}checked{% endif %} /><label for="receive_no">아니오</label>
											</li>
										</ul>
										<p class="gray">* 거래관련 정보는 고객님의 거래안전을 위하여 이메일 수신거부와 관계없이 발송됩니다.</p>
									</td>
								</tr>
								<tr>
									<th scope="row"><span>주소</span></th>
									<td>
										<ul class="pta">
											{% if member.addr %}
												<li>
													<span class="mvalign">{{ member.addr }}</span>
												</li>
											{% else %}
												<li>
													<span class="mvalign">등록된 배송지 정보가 없습니다.</span>
												</li>
											{% endif %}
										</ul>
									</td>
								</tr>
								<tr>
									<th scope="row"><span>주소 변경</span></th>
									<td>
										<ul class="pta">
											<!-- 카카오 주소 찾기 api -->
											<div id="findAddr">
												<input type="text" id="sample6_postcode" class="addrTexts" placeholder="우편번호">
												<input type="button" onclick="sample6_execDaumPostcode()" value="우편번호 찾기"><br>
												<input type="text" id="sample6_address" placeholder="주소" class="addrTexts"><br>
												<input type="text" id="sample6_detailAddress" placeholder="[선택] 상세주소">
												<input type="text" id="sample6_extraAddress" placeholder="[선택] 참고항목">
											</div>
										</ul>
									</td>
								</tr>
								<tr>
									<th scope="row"><span>휴대폰</span></th>
									<td>
										<ul class="pta">
											<li>
												<span class="mvalign">{{ member.tel }}</span>
											</li>
											<br><br>
										</ul>
									</td>
								</tr>
								{% comment %} <tr>
									<th scope="row"><span>생년월일</span></th>
									<td>
										<ul class="pta">
											<li>
												<select>
													<option value='' selected="selected">선택하세요</option>
													<script type="text/javascript">
													//<![CDATA[
														for(var i=1940; i<=2014; i++){
															document.write("<option value=''>" + i + "년"+ "</option>");	
														};
													//]]>
													</script>
												</select>
											</li>
											<li>&nbsp;<span class="valign">년</span>&nbsp;&nbsp;&nbsp;</li>
											<li>
												<select>
													<option value='' selected="selected">선택하세요</option>
													<script type="text/javascript">
													//<![CDATA[
														for(var i=1; i<=12; i++){
															if(i<10){
																document.write("<option value=''>0" + i + "월"+"</option>");
															}else{
																document.write("<option value=''>" + i + "월"+ "</option>");
															};
														};
													//]]>
													</script>
												</select>
											</li>
											<li>&nbsp;<span class="valign">월</span>&nbsp;&nbsp;&nbsp;</li>
											<li>
												<select>
													<option value='' selected="selected">선택하세요</option>
													<script type="text/javascript">
													//<![CDATA[
														for(var i=1; i<=31; i++){
															if(i<10){
																document.write("<option value=''>0" + i + "일"+"</option>");
															}else{
																document.write("<option value=''>" + i + "일"+ "</option>");
															};
														};
													//]]>
													</script>
												</select>
											</li>
											<li class="r20">&nbsp;<span class="valign">일</span></li>
											<li class="pt5">
												<ul class="baseQues">
													<li>
														<input type="radio" name="birth" id="solar" class="radio_t" checked="checked"/><label for="solar">양력</label>
													</li>
													<li>
														<input type="radio" name="birth" id="lunar" class="radio_t"/><label for="lunar">음력</label>
													</li>
												</ul>
											</li>
										</ul>
									</td>
								</tr> {% endcomment %}
							</tbody>
							</table>
						</div>
						

					</div>

					
					<!-- Btn Area -->
					<div class="btnArea">
						<div class="bCenter">
							<ul>
								<li><a href="/" class="nbtnbig">취소하기</a></li>
								<li><button type="button" class="sbtnMini">수정하기</button></li>
							</ul>
						</div>
					</div>
					<!-- //Btn Area -->

{% comment %} 
<script type="text/javascript" src="{% static '/js/jquery.fancybox-1.3.4.pack.js' %}"></script>
<link rel="stylesheet" type="text/css" href="{% static '/css/jquery.fancybox-1.3.4.css' %}" /> {% endcomment %}
<script type="text/javascript">
	$(function(){
		

		


	});
</script>


				</div>
			</div>
			<!-- //contents -->


		</div>
	</div>
	<!-- //container -->




	<div id="footerWrap">
		<div id="footer">
			<div id="fnb">
				<ul>
					<li class="left"><a href="#">개인정보취급방침</a></li>
					<li><a href="#">이용약관</a></li>
					<li class="left"><a href="#">이메일무단수집거부</a></li>
					<li><a href="#">고객센터</a></li>
					<li class="left brand"><a href="#">앙꼬 브랜드 사이트</a></li>
				</ul>
			</div>
			
			<div id="finfo">
				<div id="flogo"><img src="{% static '/images/txt/flogo.gif' %}" alt="JARDIN THE COFFEE CREATOR, SINCE 1984" /></div>
				<address>
					<ul>
						<li>㈜앙꼬</li>
						<li>대표자 윤영노</li>
						<li class="tnone">주소 서울시 강남구 논현동 4-21번지 영 빌딩</li>
						<li class="webnone">소비자상담실 02)546-3881</li>
						<li>사업자등록번호 211-81-24727</li>
						<li class="tnone">통신판매신고 제 강남 – 1160호</li>
						<li class="copy">COPYRIGHT © 2014 JARDIN <span>ALL RIGHTS RESERVED.</span></li>
					</ul>
				</address>

				<div id="inicis"><img src="{% static '/images/ico/ico_inicis.png' %}" alt="이니시스 결제시스템" /></div>
			</div>
		</div>
	</div>



</div>
</div>
</body>
</html>