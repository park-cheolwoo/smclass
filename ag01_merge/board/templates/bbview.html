{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name='csrf_token' content="{{csrf_token}}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" type="text/css" href="{% static '/css/nboard.css' %}">
  <script src="http://code.jquery.com/jquery-latest.min.js"></script>
  <title>ANG-GGO</title>
  <script>
    // 1. ëª¨ë‹¬ì°½ ìœ„ì¹˜ì •ë³´ ìˆ˜ì§‘ ë™ì˜
    let userLat = null;
    let userLon = null;
    let nearestLocation = null;
    let nearestLocation_s = null;

    // ìœ„ì¹˜ ì •ë³´ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” í•¨ìˆ˜
    function updateLocation(lat, lon) {
      userLat = lat;
      userLon = lon;

      // ìœ„ì¹˜ ë°ì´í„°ë¥¼ sessionStorageì— ì €ì¥
      sessionStorage.setItem("userLat", lat);
      sessionStorage.setItem("userLon", lon);

      // CSV ë°ì´í„°ì™€ ë¹„êµí•˜ì—¬ ê°€ì¥ ê°€ê¹Œìš´ ìœ„ì¹˜ ì—…ë°ì´íŠ¸
      $.ajax({
        url: '/static/ì¢Œí‘œë°ì´í„°.csv',
        dataType: 'text',
        success: function (data) {
          processCSVData(data, lat, lon);
        },
        error: function () {
          alert('CSV íŒŒì¼ì„ ì½ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        },
      });
    }

    // ê°€ì¥ ê°€ê¹Œìš´ ìœ„ì¹˜ë¥¼ ì°¾ê³  DOM ì—…ë°ì´íŠ¸
    function processCSVData(data, lat, lon) {
      const lines = data.split("\n");
      let minDistance = Infinity;

      for (let i = 1; i < lines.length; i++) {
        const line = lines[i].trim();
        if (line) {
          const columns = line.split(",");
          const ì‹œë„ = columns[0];
          const ì‹œêµ°êµ¬ = columns[1];
          const ìœ„ë„ = parseFloat(columns[4]);
          const ê²½ë„ = parseFloat(columns[5]);

          const distance = getDistance(lat, lon, ìœ„ë„, ê²½ë„);
          if (distance < minDistance) {
            minDistance = distance;
            nearestLocation = `${ì‹œë„} ${ì‹œêµ°êµ¬}`;
            nearestLocation_s = `${ì‹œêµ°êµ¬}`;
          }
        }
      }

      // DOM ì—…ë°ì´íŠ¸
      if (nearestLocation) $("#gps").html(`<h2>${nearestLocation}</h2>`);
      if (nearestLocation_s) $("#gps_s").html(`<h2>${nearestLocation_s} <i class="fa-solid fa-location-dot"></i></h2>`);

      // ìœ„ì¹˜ ë°ì´í„°ë¥¼ sessionStorageì— ì €ì¥
      sessionStorage.setItem("nearestLocation", nearestLocation);
      sessionStorage.setItem("nearestLocation_s", nearestLocation_s);
    }

    // Haversine ê³µì‹ìœ¼ë¡œ ê±°ë¦¬ ê³„ì‚°
    function getDistance(lat1, lon1, lat2, lon2) {
      const radius = 6371; // ì§€êµ¬ ë°˜ì§€ë¦„ (km)
      const toRad = (value) => (value * Math.PI) / 180;
      const dLat = toRad(lat2 - lat1);
      const dLon = toRad(lon2 - lon1);
      const a =
        Math.sin(dLat / 2) ** 2 +
        Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) * Math.sin(dLon / 2) ** 2;
      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
      return radius * c;
    }

    // ìœ„ì¹˜ ê¶Œí•œ ìš”ì²­ ë° ì—…ë°ì´íŠ¸
    function requestLocationPermission() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          (position) => {
            const lat = position.coords.latitude;
            const lon = position.coords.longitude;
            updateLocation(lat, lon);
            alert("ìœ„ì¹˜ ê¶Œí•œì´ í—ˆìš©ë˜ì—ˆìŠµë‹ˆë‹¤.");
          },
          (error) => {
            switch (error.code) {
              case error.PERMISSION_DENIED:
                alert("ìœ„ì¹˜ ê¶Œí•œì´ ê±°ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤.");
                break;
              case error.POSITION_UNAVAILABLE:
                alert("ìœ„ì¹˜ ì •ë³´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                break;
              case error.TIMEOUT:
                alert("ìœ„ì¹˜ ìš”ì²­ì´ ì‹œê°„ ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤.");
                break;
              default:
                alert("ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            }
          }
        );
      } else {
        alert("ì´ ë¸Œë¼ìš°ì €ëŠ” ìœ„ì¹˜ ì„œë¹„ìŠ¤ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
      }
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ sessionStorageì—ì„œ ë°ì´í„° ë³µì›
    $(document).ready(() => {
      const storedLat = sessionStorage.getItem("userLat");
      const storedLon = sessionStorage.getItem("userLon");
      const storedNearestLocation = sessionStorage.getItem("nearestLocation");
      const storedNearestLocation_s = sessionStorage.getItem("nearestLocation_s");

      if (storedLat && storedLon) {
        userLat = parseFloat(storedLat);
        userLon = parseFloat(storedLon);
        nearestLocation = storedNearestLocation;
        nearestLocation_s = storedNearestLocation_s;

        // DOM ë³µì›
        if (nearestLocation) $("#gps").html(`<h2>${nearestLocation}</h2>`);
        if (nearestLocation_s) $("#gps_s").html(`<h2>${nearestLocation_s} <i class="fa-solid fa-location-dot"></i></h2>`);
      }
    });// 1ë²ˆ ë

  
  // 2. ì¢‹ì•„ìš” ê¸°ëŠ¥
  $(function(){
    $("#likeBtn").click(function(){
      const csrfToken = $("meta[name='csrf_token']").attr("content");
      let bno = "{{board.bno}}"
      $.ajax({
        headers:{"X-CSRFToken":csrfToken},
        url:"/board/likes/",
        type:"post",
        data:{"bno":bno},
        success:function(data){
          console.log("ê²°ê³¼ data.result : "+data.result)
          if(data.result == "remove"){
            $("#likecount").text(data.count)
            $("#liketxt").html('<i class="fa-regular fa-thumbs-up"></i>')
            console.log(data.count)
          }else{
            $("#likecount").text(data.count)
            $("#liketxt").html('<i class="fa-solid fa-thumbs-up"></i>')
            console.log(data.count)
          }
        },
        error:function(){
          alert("ì‹¤íŒ¨")
        }
      })//ajax
    });
  });// 2ë²ˆ ë

  // 3. ëŒ“ê¸€ë“±ë¡(ì…ë ¥)
  $(document).on("click", ".replyBtn", function () {
    if($('.replyType').val().length<2){
      alert('ëŒ“ê¸€ì€ ë‘ ìë¦¬ ì´ìƒ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤.');
      $('.replyType').focus()
      return false();
    }
    const ccontent = $(".replyType").val();
    const bno = "{{ board.bno }}";
    const csrfToken = $("meta[name='csrf_token']").attr("content");
  
    $.ajax({
      headers: { "X-CSRFToken": csrfToken },
      url: "/comment/cwrite/",
      type: "post",
      data: { ccontent: ccontent, bno: bno },
      success: function (data) {
        if (data.result === "success") {
          alert("í•˜ë‹¨ëŒ“ê¸€ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.");
          
          var datahtml = ""
            datahtml += `<ul id="${data.comment[0].cno}">`
            datahtml += `<li class="name">{{request.session.session_nickname}}<span>[ ${data.comment[0].cdate} ]</span></li>`
            datahtml += `<li class="txt">${data.comment[0].ccontent}</li>`
            datahtml += `<li class="btn">`
            datahtml += `<a class="uBtn rebtn">ìˆ˜ì •</a>&nbsp`
            datahtml += `<a class="dBtn rebtn">ì‚­ì œ</a>`
            datahtml += `</li>`
            datahtml += `</ul>`
            console.log(datahtml)
            $(".comments-list").prepend(datahtml)
            let cnt = $("#cnt").text()
            console.log("ê°œìˆ˜ : "+(Number(cnt)+1))
            $("#cnt").text(Number(cnt)+1)
            location.reload();
        } else {
          alert("ë“±ë¡ì´ ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”.");
        }
      },
      error: function () {
        alert("ì‹¤íŒ¨");
      },
    });
  
    $(".replyType").val("");
  });// 3ë²ˆ ë

// 4. ëŒ“ê¸€ì‚­ì œ - ë™ì í´ë¦­ì§„í–‰
$(document).on("click",".dBtn",function(){
  const csrfToken = $("meta[name='csrf_token']").attr("content");
  let cno = $(this).closest("ul").attr("id");
  if (confirm(cno + "ë²ˆ ëŒ“ê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")){
    //ajax
    $.ajax({
      headers:{"X-CSRFToken":csrfToken},
      url:"/comment/cdelete/",
      type:"post",
      data:{"cno":cno},
      success:function(data){
        console.log("ê²°ê³¼ data.result : "+data.result)

        if (data.result == "success"){
          alert(cno + "ë²ˆ ëŒ“ê¸€ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.")
          $("#"+cno).remove()
          //ì „ì²´ê°œìˆ˜ -1ê°ì†Œ
          let cnt = $("#cnt").text()
          console.log("ê°œìˆ˜ : "+(Number(cnt)-1))
          $("#cnt").text(Number(cnt)-1)
        }
      },
      error:function(){
        alert("ì‹¤íŒ¨")
      }
    })//ajax
  }//confirm
});// 4ë²ˆ ë

// 5. ëŒ“ê¸€ìˆ˜ì •
$(document).on("click",'.uBtn',function(){
  let cno = $(this).closest("ul").attr("id");
  let id = "{{request.session.session_nickname}}";
  let cdate = $(this).closest("ul").find(".name span").text();
  let ccontent = $(this).closest("ul").find(".txt").text();

  var datahtml = ""
    datahtml += `<li class="name">${id}<span>&nbsp;${cdate}&nbsp;</span></li>`
    datahtml += `<li class="btn">`
    datahtml += `<a class="sBtn rebtn">ì™„ë£Œ</a>&nbsp`
    datahtml += `<a class="cBtn rebtn">ì·¨ì†Œ</a>`
    datahtml += `</li>`
    datahtml += `<li class="txt"><textarea class="replyType" style="width: 1000px; height: 200px; font-size: 20px; margin-top: 10px;">${ccontent}</textarea></li>`
  $("#"+cno).html(datahtml);
});// 5ë²ˆ ë

// 6. ëŒ“ê¸€ìˆ˜ì •(ì·¨ì†Œ)
$(document).on("click",'.cBtn',function(){
  location.reload();
});// 6ë²ˆ ë

// 7. ëŒ“ê¸€ìˆ˜ì •(ì €ì¥)
$(document).on("click",'.sBtn',function(){
  let cno = $(this).closest("ul").attr("id");
  let ccontent = $(this).closest("ul").find(".txt textarea").val();
  const csrfToken = $("meta[name='csrf_token']").attr("content");
  //ajax
  $.ajax({
    headers:{"X-CSRFToken":csrfToken},
    url:"/comment/cupdate/",
    type:"post",
    data:{"cno":cno,"ccontent":ccontent},
    success:function(data){
      console.log("ê²°ê³¼ data.result : "+data.result)
      console.log("ê²°ê³¼ data.comment[0].cno : "+data.comment[0].cno)
      console.log("ê²°ê³¼ data.comment[0].ccontent : "+data.comment[0].ccontent)

      if (data.result == "success"){
        alert("í•˜ë‹¨ëŒ“ê¸€ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.")
        var datahtml = ""

        datahtml += `<li class="name">{{request.session.session_nickname}}<span>[ ${data.comment[0].cdate} ]</span></li>`
        datahtml += `<li class="btn">`
        datahtml += `<a class="uBtn rebtn">ìˆ˜ì •</a>&nbsp`
        datahtml += `<a class="dBtn rebtn">ì‚­ì œ</a>`
        datahtml += `</li>`
        datahtml += `<li class="txt">${data.comment[0].ccontent}</li>`
        $("#"+cno).html(datahtml);
        location.reload();
      }else{
        alert("ë“±ë¡ì´ ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”.")
      }
    },
    error:function(){
      alert("ì‹¤íŒ¨")
    }
  })//ajax
});//7ë²ˆ ë

// 8. ëŒ€ëŒ“ê¸€ ê¸°ëŠ¥
$(document).on("click", ".rBtn", function () {
  const parentCno = $(this).closest("ul").attr("id"); // ë¶€ëª¨ ëŒ“ê¸€ ID
  const bno = "{{ board.bno }}"; // ê²Œì‹œê¸€ ID
  const csrfToken = $("meta[name='csrf_token']").attr("content");

  const replyBox = `
      <li class="txt">
        <textarea class="replyType" style="width: 100%; height: 100px;"></textarea>
        <button class="r_Btn rebtn">ë‹µê¸€ ë“±ë¡</button>
        <button class="c_Btn rebtn">ì·¨ì†Œ</button>
      </li>`;
  $(this).closest("ul").append(replyBox);

  $(document).on("click", ".r_Btn", function () {
      const ccontent = $(this).siblings(".replyType").val();
      if (ccontent.length < 2) {
          alert('ë‹µê¸€ì€ ë‘ ê¸€ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.');
          return;
      }

      $.ajax({
          headers: { "X-CSRFToken": csrfToken },
          url: "/comment/reply/",
          type: "post",
          data: { cno: parentCno, bno: bno, ccontent: ccontent },
          success: function (data) {
              if (data.result === "success") {
                  alert("ë‹µê¸€ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.");
                  location.reload();
              } else {
                  alert("ë‹µê¸€ ë“±ë¡ ì‹¤íŒ¨. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
              }
          },
          error: function () {
              alert("ì„œë²„ ìš”ì²­ ì‹¤íŒ¨. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
          }
      });
  });

  $(document).on("click", ".c_Btn", function () {
      $(this).closest(".txt").remove();
  });
});
// 8ë²ˆ ë
</script>
</head>
<body>
  <!-- í—¤ë” ë¶€ë¶„ -->
  <header>
    <div class="inner">
      <a href="/"><span class="main_logo">ë¡œê³ </span></a>
      <ul>
        <a href="/map/mview/"><li>ì§€ë„</li></a>
        <a href="/foodBoard/foodList/"><li>ë§›ì§‘ì¶”ì²œ</li></a>
        <a href="/board/nboard/"><li>ê²Œì‹œíŒ</li></a>
        <li>ì˜ˆì•½</li>
        <li>ì´ë²¤íŠ¸</li>
        <a href="/Brand/"><li>ë¸Œëœë“œ ì†Œê°œ</li></a>
      </ul>
      <span>
        <button type="button" class="ag_my"><a href="/member/login/">ë¡œê·¸ì¸/íšŒì›ê°€ì…</a></button>
        <button type="button" class="ag_my"><a href="/member/logout/">ë¡œê·¸ì•„ì›ƒ</a></button>
      </span>
    </div>
    <hr>
  </header>
  <!-- ë©”ì¸ ì‹¤í–‰ -->
  <main>
    <form action="#" name="mapping" method="post">
      {% csrf_token %}
      <button type="button" id="gps_s"><h2>ê°•ë‚¨êµ¬  <i class="fa-solid fa-location-dot"></i></h2></button>
      <input type="search" id="list_search" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”." >
      <button id="seBtn">ê²€ìƒ‰</button>

      <!-- ìœ„ì¹˜ ëª¨ë‹¬ì°½ -->
      <div class="modal">
        <div class="modal_body">
            <h2>ì§€ì—­ ë³€ê²½</h2>
            <hr>
            <input type="text" name="chg" id="chg">
            <button type="button" id="chgBtn">ê²€ìƒ‰</button><br>
            <button type="button" class="now">í˜„ì¬ ë‚´ ìœ„ì¹˜ ì‚¬ìš©í•˜ê¸°</button>
            <p>ì¶”ì²œ</p>
            <ul>
              <li><a>ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬</a></li><br>
              <li><a>ì„œìš¸íŠ¹ë³„ì‹œ ì†¡íŒŒêµ¬</a></li><br>
              <li><a>ì„œìš¸íŠ¹ë³„ì‹œ ê°•ì„œêµ¬</a></li><br>
              <li><a>ê²½ê¸°ë„ ë¶€ì²œì‹œ</a></li><br>
              <li><a>ê²½ê¸°ë„ ìˆ˜ì›ì‹œ</a></li><br>
              <li><a>ì¸ì²œê´‘ì—­ì‹œ ì„œêµ¬</a></li><br>
              <li><a>ê²½ê¸°ë„ ë‚¨ì–‘ì£¼ì‹œ</a></li><br>
            </ul>
            <br>
            <button type="button" id="closeBtn">ë‹«ê¸°</button>
        </div>
    </div>
    </form>
    <div class="here">
      <div class="sub_navloc">HOME&nbsp;&nbsp; <i class="fa-solid fa-chevron-right"></i>&nbsp;&nbsp; ê²Œì‹œíŒ&nbsp;&nbsp; <strong><i class="fa-solid fa-chevron-right"></i>&nbsp;&nbsp; ê²Œì‹œê¸€ ìƒì„¸ë³´ê¸°</strong></div>
      <div id="gps">ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬</div>
    </div>
    <div class="board">
      <!-- ì¹´í…Œê³ ë¦¬ -->
      <div class="b_category">
        <ul>
          <li><a href="/board/nboard/?bselect=ì¸ê¸°ê¸€">ì¸ê¸°ê¸€ <img src="/static/images/star.png" id="heart"></a></li><br>
          <li><a href="/board/nboard/?bselect=ì „ì²´">ì „ì²´</a></li><br>
          <li><a href="/board/nboard/?bselect=ì¶”ì²œë§›ì§‘">ì¶”ì²œë§›ì§‘</a></li><br>
          <li><a href="/board/nboard/?bselect=ê°ì„±ì¹´í˜">ê°ì„±ì¹´í˜</a></li><br>
          <li><a href="/board/nboard/?bselect=ì·¨ë¯¸">ì·¨ë¯¸</a></li><br>
          <li><a href="/board/nboard/?bselect=ì›¨ì´íŒ…">ì›¨ì´íŒ…</a></li><br>
          <li><a href="/board/nboard/?bselect=ì‹¤ì‹œê°„ê³µìœ ">ì‹¤ì‹œê°„ê³µìœ </a></li><br>
          <li><a href="/board/nboard/?bselect=ìƒí™œ/í¸ì˜">ìƒí™œ/í¸ì˜</a></li><br>
          <li><a href="/board/nboard/?bselect=êµí†µ">êµí†µ</a></li><br>
          <li><a href="/board/nboard/?bselect=í’ê²½">í’ê²½</a></li><br>
          <li><a href="/board/nboard/?bselect=ì‚¬ê±´ì‚¬ê³ ">ì‚¬ê±´ì‚¬ê³ </a></li><br>
          <li><a href="/board/nboard/?bselect=ê¸°íƒ€">ê¸°íƒ€</a></li><br>
        </ul>
      </div>
      <!-- ê²Œì‹œíŒ ìƒì„¸ë³´ê¸° -->
      <div class="nlistview">
        <ul>
          <li><div id="tag">#{{board.bselect}}</div></li><br>
          <li>{{board.member.nickname}}</li><br>
          <li><span>{{board.bgps}}</span>&nbsp;&nbsp;|&nbsp;&nbsp;<span>{{board.bdate|date:'Y-m-d H:i'}}</span></li><br>
          {% if request.session.session_id == board.member.id %}
          <div class="button-wrapper">
            <button type="button" class="modify" onclick="javascript:location.href='/board/bmodify/{{board.bno}}/'">ìˆ˜ì •</button>
            <button type="button" class="delete" onclick="javascript:location.href='/board/bdelete/{{board.bno}}/'">ì‚­ì œ</button>
          </div>
          {% else %}
          {% endif %}
          <li>{{board.btitle}}</li><br>
          <li>{{board.bcontent|safe}}</li><br>
          {% if board.bfile %}
            <li><img id="fileimg" src="{{board.bfile.url}}"></li><br>
          {% else %}
          {% endif %}
          <li id="bhit">ğŸ‘€{{board.bhit}}ëª…ì´ ë´¤ì–´ìš”</li><br>
        </ul>
        <a id="add" href="/board/bwrite/"><i class="fa-solid fa-plus"></i></a>
        <!-- ì´ì „ê¸€, ë‹¤ìŒê¸€ -->
        <div>
          <ul class="tbody">
            <li><a href="/board/bbview/{{prev_qs.bno}}/">
              <h4>PREV</h4>
              {% if prev_qs.btitle %}
              <p>{{prev_qs.btitle}}</p>
              {% else %}
              <p><a>ì´ì „ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</a></p>
              {% endif %}
            </a></li>
            <li><a href="/board/bbview/{{next_qs.bno}}/">
              <h4>NEXT</h4>
              {% if next_qs.btitle %}
              <p>{{next_qs.btitle}}</p>
              {% else %}
              <p><a>ë‹¤ìŒ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</a></p>
              {% endif %}
            </a></li>
          </ul>
        </div>
        <!-- ëŒ“ê¸€ -->
        <!-- ì¢‹ì•„ìš” ê¸°ëŠ¥ -->
        <div class="subject">
          <ul>
            <li>
              <a id="likeBtn">
                {% if result == "0" %}
                <span id="liketxt">
                  <i class="fa-regular fa-thumbs-up"></i>
                </span>
                <span id="likecount">{{count}}</span>
                {% else %}
                <span id="liketxt">
                  <i class="fa-solid fa-thumbs-up"></i>
                </span>
                <span id="likecount">{{count}}</span>
                {% endif %}
            </a>
            <span id="replycount"><i class="fa-regular fa-comment"></i>&nbsp;<span id="cnt">{{clist.count}}</span></span>
            </li>
          </ul>
        </div>
        <div class="comments-section">
          <h3>ëŒ“ê¸€</h3>
        
          <!-- ëŒ“ê¸€ ì‘ì„± í¼ -->
          <div class="comment-form">
            <textarea placeholder="ëŒ“ê¸€ì„ ì‘ì„±í•´ì£¼ì„¸ìš”." rows="4" class="replyType"></textarea>
            <button type="button" class="replyBtn">ëŒ“ê¸€ ì‘ì„±</button>
          </div>
        
          <!-- ëŒ“ê¸€ ë¦¬ìŠ¤íŠ¸ -->
          <div class="comments-list">
            <!-- ìƒ˜í”Œ ëŒ“ê¸€ -->
            {% if clist %}
						  {% for comment in clist %}
                <ul id="{{comment.cno}}">
                  <div class="comment">
                    {% if comment.cindent > 0  %}
                      {% for i in ""|rjust:comment.cindent  %}<img src="/static/images/reply.png" style="width: 30px; height: 30px; margin: 0;">{% endfor %}
                    {% endif %}
                    <li class="name">{{comment.member.nickname}} <span>[ {{comment.cdate|date:'Y-m-d  H:i:s'}}]</span></li>
                    <span>
                    {% if request.session.session_id == comment.member.id  %}
                      <li class="btn">
                        <a class="uBtn rebtn">ìˆ˜ì •</a>
                        <a class="dBtn rebtn">ì‚­ì œ</a>
                        <a class="rBtn rebtn">ë‹µê¸€</a>
                      </li>
                    {% else %}
                      <li class="btn">
                        <a class="rBtn rebtn">ë‹µê¸€</a>
                      </li>
                    {% endif %}
                    </span>
                    <li class="txt">{{comment.ccontent}}</li>
                  </div>
                </ul>
						  {% endfor %}
						{% else %}
						<ul><li class="txt">ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤. ì²« ëŒ“ê¸€ì„ ë‹¬ì•„ì£¼ì„¸ìš”! ğŸ˜»</li></ul>
						{% endif %}
          </div>
        </div>
      </div>
      
  
  
  </div>
</div>
      

    </div>
  </main>
  <!-- í•˜ë‹¨ ë¶€ë¶„ -->
  <footer>
    <div class="footer">
      <div class="ftnavi">
        <ul>
          <li><a href="">íšŒì‚¬ì†Œê°œ</a></li>
          <li><a href="">ì˜¤ì‹œëŠ”ê¸¸</a></li>
          <li><a href="">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a></li>
          <li><a href="">ì˜ìƒì •ë³´ì²˜ë¦¬ê¸°ê¸°ìš´ì˜ê´€ë¦¬ë°©ì¹¨</a></li>
          <li><a href="">ì´ìš©ì•½ê´€</a></li>
          <li><a href="">ì´ë©”ì¼ë¬´ë‹¨ìˆ˜ì§‘ê±°ë¶€</a></li>
        </ul>
        <div class="addr">
          <p>í¬ë ˆìŠ¤íŠ¸ ë¦¬ì†œ<span>|</span>ì¶©ì²­ë¶ë„ ì œì²œì‹œ ë°±ìš´ë©´ ê¸ˆë´‰ë¡œ 365</p>
          <p class="tel">ëŒ€í‘œë²ˆí˜¸ : 043-649-6000&nbsp;&nbsp;
          <span>ì˜ˆì•½ë¬¸ì˜ : 1600-0060</span>
          <span>ë‹¨ì²´ë¬¸ì˜ : 02-6177-5999</span>
          <span>ë¶„ì–‘ë¬¸ì˜ : 02-567-5555</span>
          <span>í†µì‹ íŒë§¤ì—…ì‹ ê³  : 2011-ì¶©ë¶ì œì²œ-0016í˜¸</span>
          </p>
          <p>ë©”ë¦¬ì¸ í™”ì¬ì™€ ê°œì¸ì •ë³´ ë°°ìƒì±…ì„ë³´í—˜ ê³„ì•½ì„ ì²´ê²°í•˜ì—¬ íšŒì› ê°œì¸ì •ë³´ë¥¼ ë³´í˜¸í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
          <p class="copy">COPYRIGHT(C) HOBAN HOTEL & RESORT. ALL RIGHTS RESERVED.</p>
        </div>
      </div>
      <div class="right">
        <div class="sns">
        </div>
        <div class="group">
          <select name="site_go" id="site_go" class="sel_box">
            <option value="#">íŒ¨ë°€ë¦¬ì‚¬ì´íŠ¸</option>
            <option value="https://www.ihoban.co.kr/web">í˜¸ë°˜ê±´ì„¤</option>
            <option value="https://www.hobanapt.co.kr/web">í˜¸ë°˜ë² ë¥´ë””ì›€</option>
          </select>
          <button type="button">GO</button>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // 2. ëª¨ë‹¬ì°½ í´ë¦­
    const modal = document.querySelector('.modal');
    const btnOpenModal=document.querySelector('#gps_s');
    const btnCloseModal=document.querySelector('#closeBtn');

    btnOpenModal.addEventListener("click", ()=>{
        modal.style.display="flex";
        $("body").addClass("modal-open");
    });
    btnCloseModal.addEventListener("click", ()=>{
        modal.style.display="none";
        $("body").removeClass("modal-open");
    });//2ë²ˆ ë
  </script>
</body>
</html>